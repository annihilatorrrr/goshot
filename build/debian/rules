#!/usr/bin/make -f

export GOMODCACHE=$(CURDIR)/.go/pkg/mod
export GOCACHE=$(CURDIR)/.go/cache
export HOME=$(CURDIR)
export GOPATH=$(CURDIR)/.go
export GOPROXY=direct
export GOSUMDB=off

%:
	dh $@

override_dh_auto_build:
	mkdir -p .go/pkg/mod .go/cache
	go mod download
	go build -o goshot ./cmd/goshot

override_dh_auto_install:
	install -D -m 0755 goshot debian/goshot/usr/bin/goshot

override_dh_auto_test:
	# Skip tests during package build

override_dh_auto_clean:
	rm -rf .go
	dh_auto_clean
